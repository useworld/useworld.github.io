<!DOCTYPE html>
<html>
	<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>
  아이폰 백그라운드 스냅샷 저장 경로(iOS Background Snapshots) - To be Useful to the World
  
  </title>
  <meta name="naver-site-verification" content="0852d6d163568038e97274dc755d304f86cfebda"/>
  <meta name="description" content="백그라운드 스냅샷이 뭐야?">
  <link href="https://fonts.googleapis.com/nanumgothiccoding.css" rel="stylesheet" type="text/css">
  <link href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://useworld.github.io/ios/2020/06/05/iossnapshot.html">
  <link rel="alternate" type="application/rss+xml" title="To be Useful to the World" href="/feed.xml">
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160063834-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-160063834-1');
</script>


</head>
	<body>
		<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Useworld</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
    Menu
    <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Development
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="/category/Node.js.html">Node.js</a>
            <a class="dropdown-item" href="/category/Python.html">Python</a>
            <a class="dropdown-item" href="/category/Swift.html">Swift</a>
            <a class="dropdown-item" href="/category/Jekyll.html">Jekyll</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Hacking
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="/category/Web.html">Web</a>
            <a class="dropdown-item" href="/category/Android.html">Android</a>
            <a class="dropdown-item" href="/category/iOS.html">iOS</a>
        <!--    <a class="dropdown-item" href="/category/Forensic.html">Forensic</a> -->
            
          </div>
        </li>
        <!--
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Etc
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="/category/Cooking.html">Cooking</a>
            <a class="dropdown-item" href="/category/Food.html">Food</a>
            <a class="dropdown-item" href="/category/Guitar.html">Guitar</a>
            <a class="dropdown-item" href="/category/Game.html">Game</a>
        
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
        
          </div>
        </li>
        -->
        <!--
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
        -->
      </ul>
    </div>
  </div>
</nav>
		<!-- Page Header -->
<header class="masthead" style="background-image: url('/img/category/bg-ios.jpg')">
  
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">
          <h1>아이폰 백그라운드 스냅샷 저장 경로(iOS Background Snapshots)</h1>
          <span class="meta" style="font-size:16px;color: #AAAAAA;"><i class="far fa-calendar-alt"></i> 2020년 06월 05일
          </span>
        </div>
      </div>
    </div>
  </div>
</header>
<div class="container">
  <div class="row">
    <div class="col-lg-8 col-md-10 mx-auto">
      <div class="content">
        <h1 id="백그라운드-스냅샷이-뭐야">백그라운드 스냅샷이 뭐야?</h1>

<p>앱 실행 중 홈키를 한 번 눌러 홈화면으로 돌아가거나<br />
홈키를 두 번 눌러 Multitasking Switcher에 진입하면
직전의 앱 화면이 스크린샷으로 저장되어 화면에 보이게 된다.</p>

<p><img src="/img/posts/iossnapshot01.png" alt="" /></p>

<p>이 화면은 이미지 파일로 아이폰 내부 저장공간에 파일로 저장이 된다.</p>

<hr />

<h1 id="그래서-이게-뭐">그래서 이게 뭐?</h1>

<p>모바일 앱 보안 관련해서 백그라운드 화면에</p>

<ul>
  <li>고유식별정보(주민등록번호, 운전면허번호, 여권번호, 외국인 등록번호)</li>
  <li>비밀번호(로그인 비밀번호, 계좌 비밀번호, 공인인증서 비밀번호 등)</li>
  <li>신용정보(보안카드번호, OTP번호, 신용/체크 카드번호 등)</li>
  <li>기타 중요 정보</li>
</ul>

<p>등이 노출이 되면 취약하다고 한다.</p>

<p>이게 위험성이 엄청나게 높다고는 생각하지 않는다.<br />
백그라운드 화면이 유출될 상황이라면 이미 이게 문제가 아닌 것 같은데?</p>

<hr />

<h1 id="저장-경로">저장 경로</h1>

<p>결론부터 말하면 iOS 버전에 따라 저장경로가 다르다.</p>

<ul>
  <li>
    <p>iOS 8 미만 
<kbd>/var/mobile/Application/[BundleID]/Library/Caches/Snapshots/[PackageName]/</kbd></p>
  </li>
  <li>
    <p>iOS 8 이상 13 미만
<kbd>/var/mobile/Containers/Data/Application/[BundleID]/Library/Caches/Snapshots/[PackageName]/</kbd></p>
  </li>
  <li>
    <p>iOS 13
<kbd>/var/mobile/Conatiners/Data/Application/[BundleID]/Library/SplashBoard/Snapshots/sceneID:[PackageName]-default/</kbd></p>
  </li>
</ul>

<p><code class="highlighter-rouge">[BundleID]</code>는 0C60E8AE-54CF-4322-871E-7DC4EE39E6AA 이런 식으로 생긴 앱 고유 ID를 말하고<br />
<code class="highlighter-rouge">[PackageName]</code>은 com.useworld.test 같은 앱 패키지명을 말한다.</p>

<hr />

<h1 id="확인">확인</h1>

<p>이미지 파일 확인을 직접 해보았다.</p>

<ul>
  <li>테스트 기기 : iOS 13(Jailbroken)</li>
</ul>

<p>보통 앱 바이너리가 저장되어 있는 <kbd>/var/containers/Bundle/Application/</kbd>
경로에서 검색 해보면 원하는 앱의 이름으로 BundleID 확인이 가능하다.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/var/containers/Bundle/Application

</span><span class="gp">#</span><span class="w"> </span>find ./ <span class="nt">-name</span> Useworld
<span class="go">./0C60E8AE-54CF-4322-871E-7DC4EE39E6AA/Useworld.app/Useworld

</span><span class="gp">#</span><span class="w"> </span><span class="nb">ls </span>0C60E8AE-54CF-4322-871E-7DC4EE39E6AA/
<span class="go">BundleMetadata.plist  Useworld.app/

</span><span class="gp">#</span>_
</code></pre></div></div>

<p>내 앱의 BundleID는 0C60E8AE-54CF-4322-871E-7DC4EE39E6AA 이거구나.</p>

<p>그러면 스냅샷이 저장되는 <kbd>/var/mobile/Conatiners/Data/Application/</kbd>로 가보자.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/var/mobile/Containers/Data/Application

</span><span class="gp">#</span><span class="w"> </span><span class="nb">cd </span>0C60E8AE-54CF-4322-871E-7DC4EE39E6AA/
<span class="go">-sh: cd: 0C60E8AE-54CF-4322-871E-7DC4EE39E6AA/: No such file or directory

</span><span class="gp">#</span><span class="w"> </span><span class="nb">ls </span>0C60E8AE-54CF-4322-871E-7DC4EE39E6AA/
<span class="go">ls: cannot access '0C60E8AE-54CF-4322-871E-7DC4EE39E6AA/': No such file or directory

</span><span class="gp">#</span><span class="w"> </span>find ./ <span class="nt">-name</span> Useworld
<span class="go">
</span><span class="gp">#</span>_
</code></pre></div></div>

<p>아 뭐야 없어.
보니까 이곳에 저장되는 BundleID는 달랐던 것이었다.</p>

<hr />

<h1 id="bundleid-찾기">BundleID 찾기</h1>

<p>그러면 내가 원하는 앱의 BundleID를 어떻게 찾느냐.<br />
폴더 내에  <kbd>.com.apple.mobile_container_manager.metadata.plist</kbd> 파일에서 <code class="highlighter-rouge">PackageName</code>에 포함된 문자열로 찾으면 된다.<br />
<code class="highlighter-rouge">PackageName</code>은 위에서 말했듯이 com.useworld.test 같은 패키지명이다.</p>

<p><kbd>grep [문자열] */.com.apple.mobile_container_manager.metadata.plist</kbd></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/var/mobile/Containers/Data/Application

</span><span class="gp">#</span><span class="w"> </span><span class="nb">grep </span>useworld <span class="k">*</span>/.com.apple.mobile_container_manager.metadata.plist
<span class="go">Binary file 492BD434-B2C2-4FA9-92B9-FFD999EE8C98/.com.apple.mobile_container_manager.metadata.plist matches

</span><span class="gp">#</span><span class="w"> </span><span class="nb">cd </span>492BD434-B2C2-4FA9-92B9-FFD999EE8C98/
<span class="go">
</span><span class="gp">#</span><span class="w"> </span><span class="nb">cat</span> .com.apple.mobil e_container_manager.metadata.plist
<span class="go">bplist00�☺☻♥♦♣◄↕_►↕MCMMetadataVersion_►§MCMMetadataIdentifier_►↨MCMMetadataUserIdentity_►↨MCMMetadataContentClass_►☼MCMMetadataUUIDQ2_►↨com.useworld.test�
</span><span class="gp">♫♫☼►♠XposixUIDXposixGID_►‼personaUniqueStringTtypeWversion◄☺�_►$</span>5C0C954D-8251-4BA6-8ACE-7DECCE6A2F52► ►☻_►<span class="nv">$3D70C1E6</span><span class="nt">-879C-4E7D-8490-5D536A8AE545</span> ‼ <span class="o">(</span> @ Z t � � � � � � � � � �☺♀☺♫☺►      ☻☺       ‼              ☺7
<span class="go">
</span><span class="gp">#</span>_
</code></pre></div></div>

<p>찾앗다.<br />
<code class="highlighter-rouge">492BD434-B2C2-4FA9-92B9-FFD999EE8C98</code> 이거였다.</p>

<hr />

<h1 id="확인-1">확인</h1>

<p>이제 스냅샷 저장 경로에서 확인한다.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/var/mobile/Containers/Data/Application/492BD434-B2C2-4FA9-92B9-FFD999EE8C98/Library/SplashBoard/Snapshots/sceneID:com.useworld.test-default

</span><span class="gp">#</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-al</span>
<span class="go">38543746-8F29-4BFC-AB0A-36BE3986A7F8\@2x.ktx  5118E936-461F-4C12-9147-8C8471A09656\@2x.ktx  downscaled/

</span><span class="gp">#</span>_
</code></pre></div></div>

<p>저기있는 <code class="highlighter-rouge">ktx</code> 파일이 스냅샷 이미지 파일이다.<br />
익숙치 않은 확장자인데 맥에서 열어보면 이미지 확인이 가능하다.</p>

<hr />

<h1 id="정리">정리</h1>

<p>아이폰 백그라운드 스냅샷 확인 방법</p>

<ul>
  <li>
    <p>iOS 8 미만 
<kbd>/var/mobile/Application/[BundleID]/Library/Caches/Snapshots/[PackageName]/</kbd></p>
  </li>
  <li>
    <p>iOS 8 이상 13 미만
<kbd>/var/mobile/Containers/Data/Application/[BundleID]/Library/Caches/Snapshots/[PackageName]/</kbd></p>
  </li>
  <li>
    <p>iOS 13
<kbd>/var/mobile/Conatiners/Data/Application/[BundleID]/Library/SplashBoard/Snapshots/sceneID:[PackageName]-default/</kbd></p>
  </li>
  <li>
    <p>BundleID 찾기<br />
<kbd>grep [패키지명에 포함된 문자열] */.com.apple.mobile_container_manager.metadata.plist</kbd></p>
  </li>
  <li>
    <p>안에 들어있는 <code class="highlighter-rouge">ktx</code> 파일이 범인이다.</p>
  </li>
</ul>

<p>끝.</p>

      </div>
      <div class="more-posts">
        <div class="more-category">
          
          <h4>iOS 카테고리의 다른 글</h4>
          <a href="/category/iOS.html" class="more-button">더보기</a>
        </div>
        <table>
          <tbody>
            
            
            
              
              
            
              
              
                
                
                
                  <tr>
                    
                    <th class="more-posts-title">
                      
                        <a href="/ios/2020/06/05/iossnapshot.html"><u><strong>아이폰 백그라운드 스냅샷 저장 경로(iOS Background Snapshots)</strong></u></a>
                      
                    </th>
                    <td class="more-posts-date">2020. 06. 05</td>
                  </tr>
                
              
            
              
              
            
              
              
                
                
                
                  <tr>
                    
                    <th class="more-posts-title">
                      
                        <a href="/ios/2020/04/07/hosts.html">iOS에서 hosts 변경 적용하기</a>
                      
                    </th>
                    <td class="more-posts-date">2020. 04. 07</td>
                  </tr>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
          </tbody>
        </table>
      </div>
      
      <hr>
      <div class="clearfix">
        <!--
        
          <a class="btn btn-primary float-left" href="/python/2020/04/16/pipssl.html" data-toggle="tooltip" data-placement="top" title="Python PIP에서 SSLCertVerificationError 날 때">&larr; Previous<span class="d-none d-md-inline">
          Post</span></a>
        
        
          <a class="btn btn-primary float-right" href="/android/2020/06/09/nethunter.html" data-toggle="tooltip" data-placement="top" title="안드로이드폰을 해킹머신으로 만들어보자(Kali Nethunter for any android device)">Next<span class="d-none d-md-inline">
          Post</span> &rarr;</a>
        
        -->
      </div>
      
      <div id="disqus_thread"></div>
      <script>
      /**
      *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
      *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
      /*
      var disqus_config = function () {
      this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      */
      (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://useworld.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </div>
</div>
		<!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:useworld@naver.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/useworld">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          <li class="list-inline-item">
            <a href="https://open.kakao.com/o/s5bkJP0b">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-comments fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <hr>
        <p class="copyright text-muted">Copyright &copy; Useworld 2020</p>
      </div>
    </div>
  </div>
</footer>

		<script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>



	</body>
</html>